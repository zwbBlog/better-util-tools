((e,t)=>{"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).BetterUtilTools=t()})(this,(function(){function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function t(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function n(e,t,n){t=u(t);var r=e;if(!(t=c()?Reflect.construct(t,n||[],u(e).constructor):t.apply(e,n))||"object"!=typeof t&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=r))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(e=>"symbol"==typeof(e=(e=>{if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=typeof(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")})(e))?e:e+"")(r.key),r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t){var n,r,o,i,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return o=!(r=!0),{s:function(){a=a.call(e)},n:function(){var e=a.next();return r=e.done,e},e:function(e){o=!0,n=e},f:function(){try{r||null==a.return||a.return()}finally{if(o)throw n}}};if(Array.isArray(e)||(a=p(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),i=0,{s:t=function(){},n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function l(){l=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i=(b="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",a=b.asyncIterator||"@@asyncIterator",u=b.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function c(t,n,r,i){var a,u,s,c;n=n&&n.prototype instanceof v?n:v,n=Object.create(n.prototype),i=new F(i||[]);return o(n,"_invoke",{value:(a=t,u=r,s=i,c=d,function(t,n){if(c===p)throw Error("Generator is already running");if(c===g){if("throw"===t)throw n;return{value:e,done:!0}}for(s.method=t,s.arg=n;;){var r=s.delegate;if(r&&(r=function t(n,r){var o=r.method,i=n.iterator[o];return i===e?(r.delegate=null,"throw"===o&&n.iterator.return&&(r.method="return",r.arg=e,t(n,r),"throw"===r.method)||"return"!==o&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+o+"' method")),y):"throw"===(o=f(i,n.iterator,r.arg)).type?(r.method="throw",r.arg=o.arg,r.delegate=null,y):(i=o.arg)?i.done?(r[n.resultName]=i.value,r.next=n.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}(r,s),r)){if(r===y)continue;return r}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(c===d)throw c=g,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);if(c=p,"normal"===(r=f(a,u,s)).type){if(c=s.done?g:h,r.arg===y)continue;return{value:r.arg,done:s.done}}"throw"===r.type&&(c=g,s.method="throw",s.arg=r.arg)}})}),n}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var d="suspendedStart",h="suspendedYield",p="executing",g="completed",y={};function v(){}function m(){}function w(){}var b,S,k=((S=(S=(s(b={},i,(function(){return this})),Object.getPrototypeOf))&&S(S(L([]))))&&S!==n&&r.call(S,i)&&(b=S),w.prototype=v.prototype=Object.create(b));function C(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){var n;o(this,"_invoke",{value:function(o,i){function a(){return new t((function(n,a){!function n(o,i,a,u){var s;if("throw"!==(o=f(e[o],e,i)).type)return(i=(s=o.arg).value)&&"object"==typeof i&&r.call(i,"__await")?t.resolve(i.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(i).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}));u(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}})}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function F(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function L(t){if(t||""===t){var n,o=t[i];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return n=-1,(o=function o(){for(;++n<t.length;)if(r.call(t,n))return o.value=t[n],o.done=!1,o;return o.value=e,o.done=!0,o}).next=o}throw new TypeError(typeof t+" is not iterable")}return o(k,"constructor",{value:m.prototype=w,configurable:!0}),o(w,"constructor",{value:m,configurable:!0}),m.displayName=s(w,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){return!!(e="function"==typeof e&&e.constructor)&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,s(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},C(P.prototype),s(P.prototype,a,(function(){return this})),t.AsyncIterator=P,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new P(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},C(k),s(k,u,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t,n=Object(e),r=[];for(t in n)r.push(t);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},t.values=L,F.prototype={constructor:F,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(D),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return u.type="throw",u.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;0<=i;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc?null:i)?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),D(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n,r,o=this.tryEntries[t];if(o.tryLoc===e)return"throw"===(n=o.completion).type&&(r=n.arg,D(o)),r}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){return(e=>{if(Array.isArray(e))return e})(e)||((e,t)=>{var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}})(e,t)||p(e,t)||(()=>{throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(t,n){var r;if(t)return"string"==typeof t?e(t,n):"Map"===(r="Object"===(r={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}var g=i((function e(){r(this,e)}),[{key:"arrayEqual",value:function(e,t){if(e!==t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1}return!0}},{key:"isEmptyObj",value:function(e){return"{}"===JSON.stringify(e)||0===Object.keys(e).length}},{key:"typeIs",value:function(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}},{key:"hasClass",value:function(e,t){return new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className)}},{key:"addClass",value:function(e,t){this.hasClass(e,t)||(e.className+=" "+t)}},{key:"removeClass",value:function(e,t){this.hasClass(e,t)&&(t=new RegExp("(\\s|^)"+t+"(\\s|$)"),e.className=e.className.replace(t," "))}},{key:"getExplore",value:function(){var e,t={},n=navigator.userAgent.toLowerCase();return(e=(e=n.match(/rv:([\d.]+)\) like gecko/))||n.match(/msie ([\d\.]+)/))?t.ie=e[1]:(e=n.match(/edge\/([\d\.]+)/))?t.edge=e[1]:(e=n.match(/firefox\/([\d\.]+)/))?t.firefox=e[1]:(e=n.match(/(?:opera|opr).([\d\.]+)/))?t.opera=e[1]:(e=n.match(/chrome\/([\d\.]+)/))?t.chrome=e[1]:(e=n.match(/version\/([\d\.]+).*safari/))&&(t.safari=e[1]),t.ie?"IE: "+t.ie:t.edge?"EDGE: "+t.edge:t.firefox?"Firefox: "+t.firefox:t.chrome?"Chrome: "+t.chrome:t.opera?"Opera: "+t.opera:t.safari?"Safari: "+t.safari:"Unkonwn"}},{key:"getOS",value:function(){"navigator"in window&&"userAgent"in navigator&&navigator.userAgent.toLowerCase(),"navigator"in window&&"vendor"in navigator&&navigator.vendor.toLowerCase();var e="navigator"in window&&"appVersion"in navigator&&navigator.appVersion.toLowerCase()||"";return/mac/i.test(e)?"MacOSX":/win/i.test(e)?"windows":/linux/i.test(e)?"linux":void 0}},{key:"getMobileSys",value:function(){var e="navigator"in window&&"userAgent"in navigator&&navigator.userAgent.toLowerCase()||"";return/iphone/i.test(e)||/ipad/i.test(e)||/ipod/i.test(e)?"ios":/android/i.test(e)?"android":/win/i.test(appVersion)&&/phone/i.test(e)?"windowsPhone":void 0}},{key:"getWechatEnv",value:function(){var e="navigator"in window&&"userAgent"in navigator&&navigator.userAgent.toLowerCase()||"";return~e.search(/micromessenger/i)?~e.search(/wxwork/i)?"enterprise":"wechat":null}},{key:"getClient",value:function(){return navigator.userAgent.match(/(iPhone|iPod|Android|ios|iOS|iPad|Backerry|WebOS|Symbian|Windows Phone|Phone)/i)?"mobile":"pc"}},{key:"randomColor",value:function(){return"#"+("00000"+(16777216*Math.random()|0).toString(16)).slice(-6)}},{key:"colorToRGB",value:function(e,t){var n="number"==typeof t;if(!/^(#?)[a-fA-F0-9]{6}$/.test(e))return"";for(var r=e.replace(/#/,""),o=[],i=0;i<3;i++){var a=r.substring(2*i,2*i+2);a=parseInt(a,16),o.push(a)}return"rgb"+(n?"a":"")+"("+o.join()+(n?","+t:"")+")"}},{key:"random",value:function(e,t){return t=t-e+1,Math.floor(Math.random()*t+e)}},{key:"randomName",value:function(e,t,n){var r="",o=t,i=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];e&&(o=Math.floor(Math.random()*(n-t+1)+t));for(var a=0;a<o;a++)r+=i[Math.round(Math.random()*(i.length-1))];return r}},{key:"isIdCard",value:function(e){return/^(^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$)|(^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[Xx])$)$/.test(e)}},{key:"isPhoneNum",value:function(e){return/^(0|86|17951)?(1[3456789][0-9])[0-9]{8}$/.test(e)}},{key:"isUrl",value:function(e){return/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[\-;:&=\+\$,\w]+@)?[A-Za-z0-9\.\-]+|(?:www\.|[\-;:&=\+\$,\w]+@)[A-Za-z0-9\.\-]+)((?:\/[\+~%\/\.\w\-_]*)?\??(?:[\-\+=&;%@\.\w_]*)#?(?:[\.\!\/\\\w]*))?)/i.test(e)}},{key:"isEmail",value:function(e){return/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/i.test(e)}},{key:"isChineseName",value:function(e){return/^([\u4E00-\u9FFF]|\w)$/.test(e)}},{key:"isDate",value:function(e){return(e=new Date(e))instanceof Date&&!isNaN(e.getTime())}},{key:"download",value:function(e){var t=-1<navigator.userAgent.toLowerCase().indexOf("chrome"),n=-1<navigator.userAgent.toLowerCase().indexOf("safari");return(t||n)&&((t=document.createElement("a")).href=e,void 0!==t.download&&(n=e.substring(e.lastIndexOf("/")+1,e.length),t.download=n),document.createEvent)?((n=document.createEvent("MouseEvents")).initEvent("click",!0,!0),t.dispatchEvent(n),!0):(-1===e.indexOf("?")&&(e+="?download"),window.open(e,"_blank"),!0)}},{key:"elementIsVisibleInViewport",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=(e=e.getBoundingClientRect()).top,r=e.left,o=e.bottom,i=(e=e.right,(a=window).innerHeight),a=a.innerWidth;return t?(0<n&&n<i||0<o&&o<i)&&(0<r&&r<a||0<e&&e<a):0<=n&&0<=r&&o<=i&&e<=a}},{key:"removeHtmlTag",value:function(e){return e.replace(/<[^>]+>/g,"")}},{key:"loadResources",value:function(e,t){var n=new Map,r=[],o=this.typeIs(e);function i(e,t){var r,o;o=e,n.get("zlgb"+o)!==o?(".js"==(r=(o=null)!=(r=e)&&0<r.length?r.substr(r.lastIndexOf(".")).toLowerCase():"")?(o=document.createElement("script")).src=e:".css"==r?((o=document.createElement("link")).href=e,o.type="text/css",o.rel="stylesheet"):".less"==r&&((o=document.createElement("link")).href=e,o.type="text/css",o.rel="stylesheet/less"),t=t||function(){},o.onload=o.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(n.set("zlgb"+e,e),t())},document.getElementsByTagName("head")[0].appendChild(o)):t()}if(["string","array"].includes(o)){"string"===o&&(r=e.split(",")),"array"===o&&(r=this.deepCopy(e));for(var a=0,u=0;u<r.length;u++)i(r[u],(function(){++a===r.length&&(n.clear(),t())}))}}},{key:"copyTextToClipboard",value:function(e,t){var n=document.createElement("textarea");n.style.background="transparent",n.value=e,document.body.appendChild(n),n.select();try{document.execCommand("copy")&&t&&t()}catch(e){}document.body.removeChild(n)}},{key:"numberToChinese",value:function(e){for(var t=["零","一","二","三","四","五","六","七","八","九","十"],n=["","十","百","仟","萬","億","点",""],r=String(e).replace(/(^0*)/g,"").split("."),o=0,i="",a=r[0].length-1;0<=a;a--){switch(o){case 0:i=n[7]+i;break;case 4:new RegExp("0{4}//d{"+(r[0].length-a-1)+"}$").test(r[0])||(i=n[4]+i);break;case 8:i=n[5]+i,n[7]=n[5],o=0}o%4==2&&0!=r[0].charAt(a+2)&&0==r[0].charAt(a+1)&&(i=t[0]+i),0!=r[0].charAt(a)&&(i=t[r[0].charAt(a)]+n[o%4]+i),o++}if(1<r.length)for(i+=n[6],a=0;a<r[1].length;a++)i+=t[r[1].charAt(a)];return(i="一十"==i?"十":i).match(/^一/)&&3==i.length?i.replace("一",""):i}},{key:"toFixed",value:function(e,t){var n=this.typeIs(e);return"number"===n||"string"===n&&!window.isNaN(Number(e))?(n=-1<(e=String(e)).indexOf(".")?e.indexOf(".")+t+1:e.length,Number(e.substr(0,n))):new Error(e+"不是合法的")}},{key:"round",value:function(e,t){var n=this.typeIs(e);return"number"===n||"string"===n&&!window.isNaN(Number(e))?(n=Math.pow(10,t),Math.round(e*n)/n):new Error(e+"不是合法的")}},{key:"add",value:function(e,t,n){try{r=e.toString().split(".")[1].length}catch(e){r=0}try{o=t.toString().split(".")[1].length}catch(e){o=0}var r=Math.max(r,o),o=Math.pow(10,r);return e=Number(((e*o+t*o)/o).toFixed(r)),0<=n?this.toFixed(e,n):e}},{key:"cut",value:function(e,t,n){try{r=e.toString().split(".")[1].length}catch(e){r=0}try{o=t.toString().split(".")[1].length}catch(e){o=0}var r=Math.max(r,o),o=Math.pow(10,r);return e=Number(((e*o-t*o)/o).toFixed(r)),0<=n?this.toFixed(e,n):e}},{key:"mul",value:function(e,t,n){var r=0;e=e.toString(),t=t.toString();try{r+=e.split(".")[1].length}catch(e){}try{r+=t.split(".")[1].length}catch(e){}return e=Number(e.replace(".",""))*Number(t.replace(".",""))/Math.pow(10,r),0<=n?this.toFixed(e,n):e}},{key:"div",value:function(e,t,n){var r=0,o=0;try{r=e.toString().split(".")[1].length}catch(e){}try{o=t.toString().split(".")[1].length}catch(e){}return e=Number(e.toString().replace(".",""))/Number(t.toString().replace(".",""))*Math.pow(10,o-r),0<=n?this.toFixed(e,n):e}},{key:"continuityAdd",value:function(){var e=this,t=1<arguments.length?arguments[1]:void 0,n=0;return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(r){try{n=e.add(n,r,t)}catch(r){}})),n}},{key:"continuityCut",value:function(){var e=this,t=1<arguments.length?arguments[1]:void 0,n=0;return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(r,o){try{n=0===o?r:e.cut(n,r,t)}catch(r){}})),n}},{key:"continuityMul",value:function(){var e=this,t=1<arguments.length?arguments[1]:void 0,n=0;return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(r,o){try{n=0===o?r:e.mul(n,r,t)}catch(r){}})),n}},{key:"continuityDiv",value:function(){var e=this,t=1<arguments.length?arguments[1]:void 0,n=0;return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(r,o){try{n=0===o?r:e.div(n,r,t)}catch(r){}})),n}},{key:"digitUppercase",value:function(e){for(var t=["角","分"],n=["零","壹","贰","叁","肆","伍","陆","柒","捌","玖"],r=[["元","万","亿"],["","拾","佰","仟"]],o=e<0?"欠":"",i=(e=Math.abs(e),""),a=0;a<t.length;a++)i+=(n[Math.floor(this.mul(e,10*Math.pow(10,a)))%10]+t[a]).replace(/零./,"");i=i||"整",e=Math.floor(e);for(var u=0;u<r[0].length&&0<e;u++){for(var s="",c=0;c<r[1].length&&0<e;c++)s=n[e%10]+r[1][c]+s,e=Math.floor(e/10);i=s.replace(/(零.)*零$/,"").replace(/^$/,"零")+r[0][u]+i}return o+i.replace(/(零.)*零元/,"元").replace(/(零.)+/g,"零").replace(/^整$/,"零元整")}},{key:"getStyle",value:function(e,t){var n=e.ownerDocument?e.ownerDocument.defaultView:window;if("string"==typeof t)return n.getComputedStyle(e)[t];if(void 0===t)return n.getComputedStyle(e);if(t instanceof Array){var r,o={},i=a(t);try{for(i.s();!(r=i.n()).done;){var u=r.value;o[u]=n.getComputedStyle(e)[u]}}catch(e){i.e(e)}finally{i.f()}return o}}},{key:"formatDecimals",value:function(e){var t,n=[],r=a(String(e).split("."));try{for(r.s();!(t=r.n()).done;){var o=t.value;n.push(o.replace(new RegExp("(\\d)(?=(\\d{3})+$)","ig"),"$1,"))}}catch(e){r.e(e)}finally{r.f()}return n.join(".")}},{key:"textDecimalsNum",value:function(e){var t=this;return String(e).replace(/(\d+)\.?(\d{0,})/g,(function(e){return t.formatDecimals(e)}))}},{key:"formatRemainTime",value:function(e){var t=new Date,n=(e=new Date(e).getTime()-t.getTime(),t=0,0),r=0,o=0;return 0<=e&&(t=Math.floor(e/1e3/3600/24),n=Math.floor(e/1e3/60/60%24),r=Math.floor(e/1e3/60%60),o=Math.floor(e/1e3%60)),t+"天 "+n+"小时 "+r+"分钟 "+o+"秒"}},{key:"getBJDate",value:function(e){var t=e&&"date"===this.typeIs(new Date(e))?new Date(e):new Date,n=(e=e&&"date"===this.typeIs(new Date(e))?new Date(e):new Date).getHours();return(t=-t.getTimezoneOffset()/60)<0?(t=Math.abs(t)+8,e.setHours(n+t)):e.setHours(n-(t-=8)),e}},{key:"transformTimeZone",value:function(e){var t=void 0===(t=e.timezone)?8:t,n=(e=e.date,new Date(e).getTimezoneOffset());return e=new Date(e).getTime(),new Date(e+60*n*1e3+60*t*60*1e3)}},{key:"formatDateTime",value:function(e){var t=e.date,n=void 0===(r=e.type)?"YYYY/MM/DD hh:mm:ss":r,r=(e=void 0===(r=e.timeZoneBJ)||r,new RegExp("(d{4})-(d{1,2})-(d{1,2}) (d{1,2}):(d{1,2}):(d{1,2})","g")),o=(t&&"string"===this.typeIs(t)&&(t=t.replace(r,"$1/$2/$3 $4:$5:$6")),r=new Date(t||Date.now()),t=void 0!==t&&!t,this.isDate(r)&&"date"===this.typeIs(r));if(t||!o)return"";var i,a={"Y+":(r=e?this.getBJDate(r):r).getFullYear(),"M+":r.getMonth()+1,"D+":r.getDate(),"h+":r.getHours(),"m+":r.getMinutes(),"s+":r.getSeconds(),"q+":(r.getMonth()+3)/3|0,S:r.getMilliseconds()};for(i in a)(e=>{new RegExp("("+e+")").test(n)&&(n=n.replace(RegExp.$1,(function(t,n){return(0!==n||n<10)&&String(a[e]).length<2&&2===t.length?"0".concat(a[e]):a[e]})))})(i);return n}},{key:"getMonthMaxDay",value:function(e,t){return new Date(e,t,0).getDate()}},{key:"getWeek",value:function(e,t,n){return new Date(e+"/"+t+"/"+n).getDay()}},{key:"getMonthData",value:function(e,t){if(0<e&&1<=t&&t<=12){for(var n=1,r=new Date(e,t,0).getDate(),o=[];n<r+1;n++)o.push({year:e,month:t,day:n,week:this.getWeek(e,t,n)});return o}return[]}},{key:"getAbsoluteDay",value:function(e){function t(e){var t=e;return 1==e.toString().length?"0"+e:t}e=(r=new Date).getTime()+864e5*e,r.setTime(e),e=r.getFullYear();var n=r.getMonth(),r=r.getDate();return e+"-"+t(n+1)+"-"+t(r)}},{key:"isBankCard",value:function(e,t,n){t="https://ccdcapi.alipay.com/validateAndCacheCardInfo.json?_input_charset=utf-8&cardNo=".concat(t,"&cardBinCheck=true"),e?e.get(t).then((function(e){e=e.data,n&&n(e)})).catch((function(e){n("验证失败")})):n("需要axios依赖")}},{key:"getUrlParams",value:function(e){var t={},n=[],r=[];if(this.isUrl(e)&&-1!==e.indexOf("?")){for(var o=e.substr(e.indexOf("?")+1).split("&"),i=0;i<o.length;i++){var a=(u=d(o[i].split("="),2))[0],u=u[1];t[a]=decodeURIComponent(u),n.push(a),r.push(decodeURIComponent(u))}t["$#key"]=n,t["$#value"]=r}return t}},{key:"queryString",value:function(e){var t,n="";for(t in e)["string","number","boolean"].includes(this.typeIs(e[t]))?n+="".concat(t,"=").concat(encodeURIComponent(e[t]),"&"):n+="".concat(t,"=").concat(encodeURIComponent(JSON.stringify(e[t])),"&");return n.substr(0,n.length-1)}},{key:"throttle",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:50,n=0;return function(){var r=Date.now();if(t<r-n){n=r;for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];e.apply(this,i)}}}},{key:"debounce",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:50,n=null;return function(){for(var r=this,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];n&&clearTimeout(n),n=setTimeout((function(){e.apply(r,i)}),t)}}},{key:"toHump",value:function(e){return e.replace(/\_(\w)/g,(function(e,t){return t.toUpperCase()}))}},{key:"toLine",value:function(e){return e.replace(/([A-Z])/g,"_$1").toLowerCase()}},{key:"deepCopy",value:function(e){var t="array"===this.typeIs(e)?[]:{},n=["array","object"];if(!n.includes(this.typeIs(e)))return e;var r,o=e;for(r in o)o.hasOwnProperty(r)&&("object"===h(o[r])&&n.includes(this.typeIs(o[r]))?t[r]=this.deepCopy(o[r]):t[r]=o[r]);return t}},{key:"jsonHasKey",value:function(e,t){var n=this;return"object"===h(e)&&"string"==typeof t&&Object.keys(e).some((function(r){return r===t||n.jsonHasKey(e[r],t)}))}},{key:"unique",value:function(e){for(var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",r=[],o=0;o<e.length;o++)(()=>{var i=e[o];t?0===r.filter((function(e){return e[n]===i[n]})).length&&r.push(i):-1===r.indexOf(i)&&r.push(i)})();return r}},{key:"contains",value:function(e,t){return-1!=e.indexOf(t)}},{key:"union",value:function(e,t){return e=e.concat(t),this.unique(e)}},{key:"intersect",value:function(e,t){for(var n=this,r=(e=this.unique(e)).map((function(e){return n.contains(t,e)?e:null})).filter((function(e){return e})),o=0,i=r.length;o<i;o++)null===r[o]&&r.splice(o,1);return r}},{key:"extend",value:function(){for(var e={},t=!1,n=0,r=("boolean"===this.typeIs(arguments[0])&&(t=arguments[0],n++),function(n){for(var r in n)n.hasOwnProperty(r)&&("object"===this.typeIs(n[r])?e[r]=t?this.extend(e[r],n[r]):n[r]:e[r]=n[r])}.bind(this));n<arguments.length;n++)r(arguments[n]);return e}},{key:"retry",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.fn,r=t.max,o=(void 0===r?3:r)-1,i=t.flag||{key:"status",value:200},a=this.typeIs(n);return e=n,new Promise((function(t,n){return["function","asyncfunction"].includes(a)?u(e,t,n):n("".concat(a," is not function"))}));function u(e,t,n){e().then((function(r){return r[i.key]===i.value?t(r):0<o?(o--,u(e,t,n)):void n({code:"-1",success:!1,msg:r})})).catch((function(r){if(0<o)return o--,u(e,t,n);n({code:"-5",success:!1,msg:r})}))}}}]),y=new(i((function e(){r(this,e),this.events={}}),[{key:"on",value:function(e,t){this.events[e]?this.events[e].push(t):this.events[e]=[t]}},{key:"emit",value:function(e,t){this.events[e]&&this.events[e].forEach((function(e){return e(t)}))}},{key:"removeListener",value:function(e,t){this.events[e]&&(this.events[e]=this.events[e].filter((function(e){return e!==t})))}},{key:"once",value:function(e,t){var n=this;this.on(e,(function r(){n.removeListener(e,r),t()}))}}])),v=new((()=>{function e(){return r(this,e),n(this,e)}return s(e,g),i(e,[{key:"fileToBase64",value:function(e){return new Promise((function(t,n){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){return t(r.result)},r.onerror=function(e){return n(e)}}))}},{key:"blobToFile",value:function(e,t,n){return new File([e],t,{type:n})}},{key:"base64ToFile",value:function(e,t){for(var n=(e=e.split(","))[0].match(/:(.*?);/)[1],r=n.split("/")[1],o=atob(e[1]),i=o.length,a=new Uint8Array(i);i--;)a[i]=o.charCodeAt(i);return new File([a],"".concat(t,".").concat(r),{type:n})}},{key:"base64ToBlob",value:function(e){for(var t=(e=e.split(","))[0].match(/:(.*?);/)[1],n=atob(e[1]),r=n.length,o=new Uint8Array(r);r--;)o[r]=n.charCodeAt(r);return new Blob([o],{type:t})}},{key:"getObjectURL",value:function(e){return window.URL?window.URL.createObjectURL(e):window.webkitURL?window.webkitURL.createObjectURL(e):void 0}},{key:"streamToFile",value:function(e){var t=void 0===(t=e.res)?{}:t,n=void 0!==(n=e.preview)&&n,r=e.success;e=e.fail;if(this.isEmptyObj(t))throw new Error("请传入正确的response参数");var o,i,a,u=void 0===(u=(i=void 0===(i=t.headers)?{}:i).msg)?"文件下载失败,请检查response参数是否正确":u;if(a=void 0!==(a=i.down)&&a)return window.open(decodeURIComponent(a),"_blank");i["content-disposition"]?(a=i["content-disposition"],i=i["content-type"],a&&(-1<a.indexOf("filename*=UTF-8''")?o=a.split(";")[1].split("filename*=UTF-8''")[1].replace(/"/g,""):-1<a.indexOf("filename=")&&(o=a.split(";")[1].split("filename=")[1].replace(/"/g,""))),o=decodeURIComponent(o),a=new Blob([t.data],{type:i}),t=this.getObjectURL(a),window.navigator.msSaveOrOpenBlob?navigator.msSaveBlob(a,o):(i=document.createElement("a"),n?i.target="_blank":i.download=o,i.href=t,document.body.append(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(t)),r&&r(t)):e&&e(decodeURIComponent(u))}}])})());function m(e,t,n,r){return r=6<r||void 0===r?6:r,0==(e=(e=void 0===e||""==e?0:parseFloat(e))+(t=void 0===t||""==t?0:parseFloat(t)/60)+(n=void 0===n||""==n?0:parseFloat(n)/3600))?"":e.toFixed(r)}function w(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var n=atob(e),r=n.length,o=(t=new ArrayBuffer(r),new Uint8Array(t)),i=0;i<r;i++)o[i]=n.charCodeAt(i);return t}function b(e,t,n){for(var r="",o=t;o<t+n;o++)r+=String.fromCharCode(e.getUint8(o));return r}function S(e,t,n,r,o){for(var i,a=e.getUint16(n,!o),u={},s=0;s<a;s++)u[r[e.getUint16(i=n+12*s+2,!o)]]=((e,t,n,r)=>{var o,i,a,u,s,c,l=e.getUint16(t+2,!r),f=e.getUint32(t+4,!r),d=e.getUint32(t+8,!r)+n;switch(l){case 1:case 7:if(1==f)return e.getUint8(t+8,!r);for(o=4<f?d:t+8,i=[],u=0;u<f;u++)i[u]=e.getUint8(o+u);return i;case 2:return b(e,o=4<f?d:t+8,f-1);case 3:if(1==f)return e.getUint16(t+8,!r);for(o=2<f?d:t+8,i=[],u=0;u<f;u++)i[u]=e.getUint16(o+2*u,!r);return i;case 4:if(1==f)return e.getUint32(t+8,!r);for(i=[],u=0;u<f;u++)i[u]=e.getUint32(d+4*u,!r);return i;case 5:if(1==f)return s=e.getUint32(d,!r),c=e.getUint32(d+4,!r),(a=new Number(s/c)).numerator=s,a.denominator=c,a;for(i=[],u=0;u<f;u++)s=e.getUint32(d+8*u,!r),c=e.getUint32(d+4+8*u,!r),i[u]=new Number(s/c),i[u].numerator=s,i[u].denominator=c;return i;case 9:if(1==f)return e.getInt32(t+8,!r);for(i=[],u=0;u<f;u++)i[u]=e.getInt32(d+4*u,!r);return i;case 10:if(1==f)return e.getInt32(d,!r)/e.getInt32(d+4,!r);for(i=[],u=0;u<f;u++)i[u]=e.getInt32(d+8*u,!r)/e.getInt32(d+4+8*u,!r);return i}})(e,i,t,o);return u}var k={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},C={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},P={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},x={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},D={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},F={getImageData:function(e){return new Promise((function(t,n){function r(e){var n=(e=>{var t=new DataView(e);if(255!=t.getUint8(0)||216!=t.getUint8(1))return!1;for(var n=2,r=e.byteLength;n<r;){if(255!=t.getUint8(n))return!1;if(225==t.getUint8(n+1))return((e,t)=>{if("Exif"!=b(e,t,4))return!1;var n,r,o,i,a;t+=6;if(18761==e.getUint16(t))n=!1;else{if(19789!=e.getUint16(t))return!1;n=!0}if(42!=e.getUint16(t+2,!n))return!1;var u=e.getUint32(t+4,!n);if(u<8)return!1;if((r=S(e,t,t+u,k,n)).ExifIFDPointer)for(o in i=S(e,t,t+r.ExifIFDPointer,D,n)){switch(o){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":i[o]=x[o][i[o]];break;case"ExifVersion":case"FlashpixVersion":i[o]=String.fromCharCode(i[o][0],i[o][1],i[o][2],i[o][3]);break;case"ComponentsConfiguration":i[o]=x.Components[i[o][0]]+x.Components[i[o][1]]+x.Components[i[o][2]]+x.Components[i[o][3]]}r[o]=i[o]}if(r.GPSInfoIFDPointer)for(o in a=S(e,t,t+r.GPSInfoIFDPointer,C,n))"GPSVersionID"===o&&(a[o]=a[o][0]+"."+a[o][1]+"."+a[o][2]+"."+a[o][3]),r[o]=a[o];return r.thumbnail=((e,t,n,r)=>!(n=((e,t,n)=>{var r=e.getUint16(t,!n);return e.getUint32(t+2+12*r,!n)})(e,t+n,r))||n>e.byteLength?{}:((e=S(e,t,t+n,P,r)).Compression?6===e.Compression&&e.JpegIFOffset&&e.JpegIFByteCount&&(e.JpegIFOffset,e.JpegIFByteCount):e.PhotometricInterpretation,e))(e,t,u,n),r})(t,n+4,t.getUint16(n+2));n+=2+t.getUint16(n+2)}})(e);e=(e=>{var t=new DataView(e);if(255!=t.getUint8(0)||216!=t.getUint8(1))return!1;for(var n,r,o=2,i=e.byteLength;o<i;){if(((e,t)=>56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5))(t,o))return(r=t.getUint8(o+7))%2!=0&&(r+=1),n=o+8+(r=0===r?4:r),r=t.getUint16(o+6+r),readIPTCData(e,n,r);o++}})(e);t({exif:n||{},iptc:e||{}})}var o,i,a,u,s;/^data\:/i.test(e)?r(w(e)):/^blob\:/i.test(e)?((o=new FileReader).onload=function(e){r(e.target.result)},a=e,u=function(e){o.readAsArrayBuffer(e)},(s=new XMLHttpRequest).open("GET",a,!0),s.responseType="blob",s.onload=function(e){200!=this.status&&0!==this.status||u(this.response)},s.send()):"object"===("undefined"==typeof window?"undefined":h(window))&&"document"in window?((i=new XMLHttpRequest).onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";r(i.response),i=null},i.open("GET",e,!0),i.responseType="arraybuffer",i.send(null)):"object"===("undefined"==typeof plus?"undefined":h(plus))?plus.io.resolveLocalFileSystemURL((e=>{if(0===e.indexOf("_www")||0===e.indexOf("_doc")||0===e.indexOf("_documents")||0===e.indexOf("_downloads"))return e;if(0===e.indexOf("file://"))return e;if(0===e.indexOf("/storage/emulated/0/"))return e;if(0===e.indexOf("/")){var t=plus.io.convertAbsoluteFileSystem(e);if(t!==e)return t;e=e.substr(1)}return"_www/"+e})(e),(function(e){e.file((function(e){var t=new plus.io.FileReader;t.onload=function(e){r(w(e.target.result))},t.onerror=function(e){n(e)},t.readAsDataURL(e)}),(function(e){n(e)}))}),(function(e){n(e)})):"object"===("undefined"==typeof wx?"undefined":h(wx))&&wx.canIUse("getFileSystemManager")?wx.getFileSystemManager().readFile({filePath:e,success:function(e){r(e.data)},fail:function(e){n(e)}}):n(new Error("not support"))}))},getFloatLocationByExif:function(e){return e.GPSLatitude&&e.GPSLongitude?{lat:("S"==e.GPSLatitudeRef?-1:1)*m(e.GPSLatitude[0],e.GPSLatitude[1],e.GPSLatitude[2]),lon:("W"==e.GPSLongitudeRef?-1:1)*m(e.GPSLongitude[0],e.GPSLongitude[1],e.GPSLongitude[2])}:null}},L=(()=>{return i((function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:2;r(this,e),this.max=t,this.count=0,this.queue=[]}),[{key:"add",value:(e=l().mark((function e(t){var n,r=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.count>=this.max)return e.next=3,new Promise((function(e){return r.queue.push(e)}));e.next=3;break;case 3:return this.count++,e.next=6,t();case 6:return n=e.sent,this.count--,this.queue.length&&this.queue.shift()(),e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})),n=function(){var n=this,r=arguments;return new Promise((function(o,i){var a=e.apply(n,r);function u(e){t(a,o,i,u,s,"next",e)}function s(e){t(a,o,i,u,s,"throw",e)}u(void 0)}))},function(e){return n.apply(this,arguments)})}]);var e,n})();return(()=>{function e(t){var o;return r(this,e),(o=n(this,e,[t])).EventEmitter=y,o.options=t||{},o.file=v,o.izExif=F,o.scheduler=L,o}return s(e,g),i(e)})()}));
