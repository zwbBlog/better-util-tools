var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"function"==typeof define&&define.amd?define(t):"undefined"!=typeof module&&module.exports?module.exports=t():(e="undefined"!=typeof globalThis?globalThis:e).BetterUtilTools=t()}(this,function(){var c=this;function e(){this.events={}}e.prototype={on:function(e,t){this.events[e]?this.events[e].push(t):this.events[e]=[t]},emit:function(e,t){this.events[e]&&this.events[e].forEach(function(e){return e(t)})},removeListener:function(e,t){this.events[e]&&(this.events[e]=this.events[e].filter(function(e){return e!=t}))},once:function(e,t){function n(){t(),r.removeListener(e,n)}var r=this;this.on(e,n)}};function t(){0}return t.prototype={_init:function(){console.log("better-util-tools is ok")},arrayEqual:function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0},isEmptyObj:function(e){return"{}"===JSON.stringify(e)||0===Object.keys(e).length},typeIs:function(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()},hasClass:function(e,t){return new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className)},addClass:function(e,t){this.hasClass(e,t)||(e.className+=" "+t)},removeClass:function(e,t){this.hasClass(e,t)&&(t=new RegExp("(\\s|^)"+t+"(\\s|$)"),e.className=e.className.replace(t," "))},getExplore:function(){var e={},t=navigator.userAgent.toLowerCase(),n=void 0;return(n=t.match(/rv:([\d.]+)\) like gecko/))||(n=t.match(/msie ([\d\.]+)/))?e.ie=n[1]:(n=t.match(/edge\/([\d\.]+)/))?e.edge=n[1]:(n=t.match(/firefox\/([\d\.]+)/))?e.firefox=n[1]:(n=t.match(/(?:opera|opr).([\d\.]+)/))?e.opera=n[1]:(n=t.match(/chrome\/([\d\.]+)/))?e.chrome=n[1]:(n=t.match(/version\/([\d\.]+).*safari/))&&(e.safari=n[1]),e.ie?"IE: "+e.ie:e.edge?"EDGE: "+e.edge:e.firefox?"Firefox: "+e.firefox:e.chrome?"Chrome: "+e.chrome:e.opera?"Opera: "+e.opera:e.safari?"Safari: "+e.safari:"Unkonwn"},getOS:function(){"navigator"in window&&"userAgent"in navigator&&navigator.userAgent.toLowerCase(),"navigator"in window&&"vendor"in navigator&&navigator.vendor.toLowerCase();var e="navigator"in window&&"appVersion"in navigator&&navigator.appVersion.toLowerCase()||"";return/mac/i.test(e)?"MacOSX":/win/i.test(e)?"windows":/linux/i.test(e)?"linux":void 0},getMobileSys:function(){var e="navigator"in window&&"userAgent"in navigator&&navigator.userAgent.toLowerCase()||"";return/iphone/i.test(e)||/ipad/i.test(e)||/ipod/i.test(e)?"ios":/android/i.test(e)?"android":/win/i.test(appVersion)&&/phone/i.test(e)?"windowsPhone":void 0},getWechatEnv:function(){var e="navigator"in window&&"userAgent"in navigator&&navigator.userAgent.toLowerCase()||"";return"micromessenger"===e.match(/MicroMessenger/i)&&"wxwork"===e.match(/wxwork/i)?"enterprise":"micromessenger"===e.match(/micromessenger/i)?"wechat":void 0},getClient:function(){return navigator.userAgent.match(/(iPhone|iPod|Android|ios|iOS|iPad|Backerry|WebOS|Symbian|Windows Phone|Phone)/i)?"mobile":"pc"},randomColor:function(){return"#"+("00000"+(16777216*Math.random()<<0).toString(16)).slice(-6)},colorToRGB:function(e,t){var n="number"==typeof t;if(!/^(#?)[a-fA-F0-9]{6}$/.test(e))return"";for(var r=e.replace(/#/,""),o=[],i=0;i<3;i++){var a=r.substring(2*i,2*i+2),a=parseInt(a,16);o.push(a)}return"rgb"+(n?"a":"")+"("+o.join()+(n?","+t:"")+")"},random:function(e,t){t=t-e+1;return Math.floor(Math.random()*t+e)},randomName:function(e,t,n){var r="",o=t,i=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];e&&(o=Math.floor(Math.random()*(n-t+1)+t));for(var a=0;a<o;a++)r+=i[Math.round(Math.random()*(i.length-1))];return r},isIdCard:function(e){return/^(^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$)|(^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[Xx])$)$/.test(e)},isPhoneNum:function(e){return/^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/.test(e)},isUrl:function(e){return/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[\-;:&=\+\$,\w]+@)?[A-Za-z0-9\.\-]+|(?:www\.|[\-;:&=\+\$,\w]+@)[A-Za-z0-9\.\-]+)((?:\/[\+~%\/\.\w\-_]*)?\??(?:[\-\+=&;%@\.\w_]*)#?(?:[\.\!\/\\\w]*))?)/i.test(e)},isEmail:function(e){return/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/i.test(e)},isChineseName:function(e){return/^([\u4E00-\u9FFF]|\w)$/.test(e)},isDate:function(e){e=new Date(e);return e instanceof Date&&!isNaN(e.getTime())},download:function(e){var t=-1<navigator.userAgent.toLowerCase().indexOf("chrome"),n=-1<navigator.userAgent.toLowerCase().indexOf("safari");if(t||n){n=document.createElement("a");if(n.href=e,void 0!==n.download&&(r=e.substring(e.lastIndexOf("/")+1,e.length),n.download=r),document.createEvent){var r=document.createEvent("MouseEvents");return r.initEvent("click",!0,!0),n.dispatchEvent(r),!0}}return-1===e.indexOf("?")&&(e+="?download"),window.open(e,"_self"),!0},fileUtil:{fileToBase64:function(e){var t=new FileReader;t.readAsDataURL(e),t.onload=function(e){return e.target.result}},blobToFile:function(e,t){return e.lastModifiedDate=new Date,e.name=t,e},base64ToFile:function(e,t){for(var n=e.split(","),r=n[0].match(/:(.*?);/)[1],e=r.split("/")[1],o=atob(n[1]),i=o.length,a=new Uint8Array(i);i--;)a[i]=o.charCodeAt(i);return new File([a],t+"."+e,{type:r})},base64ToBlob:function(e){for(var t=e.split(","),e=t[0].match(/:(.*?);/)[1],n=atob(t[1]),r=n.length,o=new Uint8Array(r);r--;)o[r]=n.charCodeAt(r);return new Blob([o],{type:e})},getObjectURL:function(e){return window.URL?window.URL.createObjectURL(e):window.webkitURL?window.webkitURL.createObjectURL(e):void 0},streamToFile:function(e){var t=e.res,n=void 0===t?{}:t,r=e.preview,o=void 0!==r&&r,i=e.success,a=e.fail;if(c.isEmptyObj(n))throw new Error("请传入正确的response参数");var s=n.headers||{},t=s.msg,r=void 0===t?"文件下载失败,请检查response参数是否正确":t,e=s.down,t=void 0!==e&&e;if(t)return window.open(decodeURIComponent(t),"_blank");headers["content-disposition"]?(s=void 0,e=headers["content-disposition"],t=headers["content-type"],e&&(-1<e.indexOf("filename*=UTF-8''")?s=e.split(";")[1].split("filename*=UTF-8''")[1].replace(/"/g,""):-1<e.indexOf("filename=")&&(s=e.split(";")[1].split("filename=")[1].replace(/"/g,""))),s=decodeURIComponent(s),n=new Blob([n.data],{type:t}),window.navigator.msSaveOrOpenBlob?navigator.msSaveBlob(n,s):(t=document.createElement("a"),o?t.target="_blank":t.download=s,t.href=c.fileUtil.getObjectURL(n),document.body.append(t),t.click(),document.body.removeChild(t)),i&&i()):a&&a(decodeURIComponent(r))}},elementIsVisibleInViewport:function(e,t){var n=1<arguments.length&&void 0!==t&&t,r=e.getBoundingClientRect(),o=r.top,i=r.left,a=r.bottom,s=r.right,c=window,r=c.innerHeight,c=c.innerWidth;return n?(0<o&&o<r||0<a&&a<r)&&(0<i&&i<c||0<s&&s<c):0<=o&&0<=i&&a<=r&&s<=c},removeHtmlTag:function(e){return e.replace(/<[^>]+>/g,"")},loadResources:function(e,t){var o=new Map,n=[],r=this.typeIs(e);function i(e,t){var n,r;r=e,o.get("zlgb"+r)!==r?(".js"==(r=(n=null)!=(r=e)&&0<r.length?r.substr(r.lastIndexOf(".")).toLowerCase():"")?(n=document.createElement("script")).src=e:".css"==r?((n=document.createElement("link")).href=e,n.type="text/css",n.rel="stylesheet"):".less"==r&&((n=document.createElement("link")).href=e,n.type="text/css",n.rel="stylesheet/less"),t=t||function(){},n.onload=n.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(o.set("zlgb"+e,e),t())},document.getElementsByTagName("head")[0].appendChild(n)):t()}if(["string","array"].includes(r)){"string"===r&&(n=e.split(",")),"array"===r&&(n=this.deepCopy(e));for(var a=0,s=0;s<n.length;s++)i(n[s],function(){++a===n.length&&(o.clear(),t())})}else console.error("loadResources方法传入文件应为数组或者以逗号分隔的字符串!")},copyTextToClipboard:function(e,t){var n=document.createElement("textarea");n.style.background="transparent",n.value=e,document.body.appendChild(n),n.select();try{document.execCommand("copy")&&t&&t()}catch(e){console.warn("Oops, unable to copy")}document.body.removeChild(n)},numberToChinese:function(e){for(var t=new Array("零","一","二","三","四","五","六","七","八","九","十"),n=new Array("","十","百","仟","萬","億","点",""),r=(""+e).replace(/(^0*)/g,"").split("."),o=0,i="",a=r[0].length-1;0<=a;a--){switch(o){case 0:i=n[7]+i;break;case 4:new RegExp("0{4}//d{"+(r[0].length-a-1)+"}$").test(r[0])||(i=n[4]+i);break;case 8:i=n[5]+i,n[7]=n[5],o=0}o%4==2&&0!=r[0].charAt(a+2)&&0==r[0].charAt(a+1)&&(i=t[0]+i),0!=r[0].charAt(a)&&(i=t[r[0].charAt(a)]+n[o%4]+i),o++}if(1<r.length){i+=n[6];for(a=0;a<r[1].length;a++)i+=t[r[1].charAt(a)]}return"一十"==i&&(i="十"),i.match(/^一/)&&3==i.length&&(i=i.replace("一","")),i},add:function(e,t,n){var r,o;try{r=e.toString().split(".")[1].length}catch(e){r=0}try{o=t.toString().split(".")[1].length}catch(e){o=0}var i,a=Math.max(r,o),a=+((e*(i=Math.pow(10,a))+t*i)/i).toFixed(a);return 0<=n?this.toFixed(a,n):a},cut:function(e,t,n){var r,o;try{r=e.toString().split(".")[1].length}catch(e){r=0}try{o=t.toString().split(".")[1].length}catch(e){o=0}var i,a=Math.max(r,o),a=+((e*(i=Math.pow(10,a))-t*i)/i).toFixed(a);return 0<=n?this.toFixed(a,n):a},mul:function(e,t,n){var r=0,o=e.toString(),i=t.toString();try{r+=o.split(".")[1].length}catch(e){}try{r+=i.split(".")[1].length}catch(e){}t=Number(o.replace(".",""))*Number(i.replace(".",""))/Math.pow(10,r);return 0<=n?this.toFixed(t,n):t},div:function(e,t,n){var r=0,o=0;try{r=e.toString().split(".")[1].length}catch(e){}try{o=t.toString().split(".")[1].length}catch(e){}var i=Number(e.toString().replace(".",""))/Number(t.toString().replace(".",""))*Math.pow(10,o-r);return 0<=n?this.toFixed(i,n):i},continuityAdd:function(e,t){var n=this,r=t,o=0;return(0<arguments.length&&void 0!==e?e:[]).forEach(function(t){try{o=n.add(o,t,r)}catch(e){new Error(t+"不是合法的")}}),o},continuityCut:function(e,t){var n=this,r=t,o=0;return(0<arguments.length&&void 0!==e?e:[]).forEach(function(t,e){try{o=0===e?t:n.cut(o,t,r)}catch(e){new Error(t+"不是合法的")}}),o},continuityMul:function(e,t){var n=this,r=t,o=0;return(0<arguments.length&&void 0!==e?e:[]).forEach(function(t,e){try{o=0===e?t:n.mul(o,t,r)}catch(e){new Error(t+"不是合法的")}}),o},continuityDiv:function(e,t){var n=this,r=t,o=0;return(0<arguments.length&&void 0!==e?e:[]).forEach(function(t,e){try{o=0===e?t:n.div(o,t,r)}catch(e){new Error(t+"不是合法的")}}),o},toFixed:function(e,t){var n=this.typeIs(e);if("number"===n||"string"===n&&!window.isNaN(+e)){t=-1<(e+="").indexOf(".")?e.indexOf(".")+t+1:e.length;return+e.substr(0,t)}return new Error(e+"不是合法的")},digitUppercase:function(e){var t=["角","分"],n=["零","壹","贰","叁","肆","伍","陆","柒","捌","玖"],r=[["元","万","亿"],["","拾","佰","仟"]],o=e<0?"欠":"";e=Math.abs(e);for(var i="",a=0;a<t.length;a++)i+=(n[Math.floor(this.mul(e,10*Math.pow(10,a)))%10]+t[a]).replace(/零./,"");i=i||"整",e=Math.floor(e);for(var s=0;s<r[0].length&&0<e;s++){for(var c="",u=0;u<r[1].length&&0<e;u++)c=n[e%10]+r[1][u]+c,e=Math.floor(e/10);i=c.replace(/(零.)*零$/,"").replace(/^$/,"零")+r[0][s]+i}return o+i.replace(/(零.)*零元/,"元").replace(/(零.)+/g,"零").replace(/^整$/,"零元整")},getStyle:function(e,t){var n=e.ownerDocument?e.ownerDocument.defaultView:window;if("string"==typeof t)return n.getComputedStyle(e)[t];if(void 0===t)return n.getComputedStyle(e);if(t instanceof Array){var r={},o=!0,i=!1,a=void 0;try{for(var s=t[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var c=c.value;r[c]=n.getComputedStyle(e)[c]}}catch(e){i=!0,a=e}finally{try{!o&&s.return&&s.return()}finally{if(i)throw a}}return r}},formatDecimals:function(e){if("number"!==this.typeIs(e)&&"number"!==this.typeIs(+e))return e;e=String(e).split(".");return e[0]=e[0].replace(new RegExp("(\\d)(?=(\\d{3})+$)","ig"),"$1,"),e.join(".")},formatRemainTime:function(e){var t=new Date,n=new Date(e).getTime()-t.getTime(),r=0,o=0,e=0,t=0;return 0<=n&&(r=Math.floor(n/1e3/3600/24),o=Math.floor(n/1e3/60/60%24),e=Math.floor(n/1e3/60%60),t=Math.floor(n/1e3%60)),r+"天 "+o+"小时 "+e+"分钟 "+t+"秒"},getBJDate:function(e){var t=e&&"date"===this.typeIs(new Date(e))?new Date(e):new Date,n=e&&"date"===this.typeIs(new Date(e))?new Date(e):new Date,e=n.getHours(),t=-t.getTimezoneOffset()/60;return t<0?(t=Math.abs(t)+8,n.setHours(e+t)):(t-=8,n.setHours(e-t)),n},transformTimeZone:function(e){var t=e.timezone,n=void 0===t?8:t,t=e.date,e=new Date(t).getTimezoneOffset(),t=new Date(t).getTime();return new Date(t+60*e*1e3+60*n*60*1e3)},formatDateTime:function(e){var t=e.date,n=e.type,r=void 0===n?"YYYY/MM/DD hh:mm:ss":n,o=e.timeZoneBJ,i=void 0===o||o,a=e.log,n=void 0===a||a,o=new Date(t||Date.now()),e=void 0!==t&&!Boolean(t),a=this.isDate(o)&&"date"===this.typeIs(o);!e&&a||(n&&console.error("Invalid Date "+t+" system uses the default time"),o=new Date),i&&(o=this.getBJDate(o));var s,c={"Y+":o.getFullYear(),"M+":o.getMonth()+1,"D+":o.getDate(),"h+":o.getHours(),"m+":o.getMinutes(),"s+":o.getSeconds(),"q+":(o.getMonth()+3)/3|0,S:o.getMilliseconds()};for(s in c)!function(n){new RegExp("("+n+")").test(r)&&(r=r.replace(RegExp.$1,function(e,t){return(0!==t||t<10)&&String(c[n]).length<2&&2===e.length?"0"+c[n]:c[n]}))}(s);return r},getMonthMaxDay:function(e,t){return new Date(e,t,0).getDate()},getWeek:function(e,t,n){return new Date(e+"/"+t+"/"+n).getDay()},getMonthData:function(e,t){if(0<e&&1<=t&&t<=12){for(var n=1,r=new Date(e,t,0).getDate(),o=[];n<r+1;n++)o.push({year:e,month:t,day:n,week:this.getWeek(e,t,n)});return o}return[]},getAbsoluteDay:function(e){function t(e){var t=e;return 1==e.toString().length&&(t="0"+e),t}var n=new Date,r=n.getTime()+864e5*e;n.setTime(r);e=n.getFullYear(),r=n.getMonth(),n=n.getDate();return e+"-"+(r=t(r+1))+"-"+(n=t(n))},isBankCard:function(e,t,n){t="https://ccdcapi.alipay.com/validateAndCacheCardInfo.json?_input_charset=utf-8&cardNo="+t+"&cardBinCheck=true";e?e.get(t).then(function(e){e=e.data;n&&n(e)}).catch(function(e){n("验证失败")}):n("需要axios依赖")},getUrlParams:function(e){var t={},n=[],r=[];if(this.isUrl(e)&&-1!==e.indexOf("?")){for(var o=e.substr(e.indexOf("?")+1).split("&"),i=0;i<o.length;i++){var a=o[i].split("=")[0],s=unescape(o[i].split("=")[1]);t[a]=s,n.push(a),r.push(s)}t["$#key"]=n,t["$#value"]=r}return t},queryString:function(e){var t,n="";for(t in e)["string","number","boolean"].includes(this.typeIs(e[t]))?n+=t+"="+encodeURIComponent(e[t])+"&":n+=t+"="+encodeURIComponent(JSON.stringify(e[t]))+"&";return n.substr(0,n.length-1)},throttle:function(o,e){var i=1<arguments.length&&void 0!==e?e:50,a=0;return function(){var e=Date.now();if(i<e-a){a=e;for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];o.apply(this,n)}}},debounce:function(o,e){var i=1<arguments.length&&void 0!==e?e:50,a=null;return function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];a&&clearTimeout(a),a=setTimeout(function(){o.apply(e,n)},i)}},toHump:function(e){return e.replace(/\_(\w)/g,function(e,t){return t.toUpperCase()})},toLine:function(e){return e.replace(/([A-Z])/g,"_$1").toLowerCase()},imgChange:function(e,t){var n=new FileReader;n.onload=function(e){e=e.target.result;t&&t(e)},n.readAsDataURL(e.files[0])},deepCopy:function(e){var n=this,r="array"===this.typeIs(e)?[]:{},o=["array","object"];if(!o.includes(this.typeIs(e)))return e;return function(e){for(var t in e)e.hasOwnProperty(t)&&("object"===_typeof(e[t])&&o.includes(n.typeIs(e[t]))?r[t]=n.deepCopy(e[t]):r[t]=e[t])}(e),r},jsonHasKey:function(t,n){var r=this;return"object"==(void 0===t?"undefined":_typeof(t))&&"string"==typeof n&&Object.keys(t).some(function(e){return e===n||r.jsonHasKey(t[e],n)})},unique:function(n,e,t){for(var r=1<arguments.length&&void 0!==e&&e,o=2<arguments.length&&void 0!==t?t:"",i=[],a=0;a<n.length;a++)!function(e){var t=n[e];r?0===i.filter(function(e){return e[o]===t[o]}).length&&i.push(t):-1===i.indexOf(t)&&i.push(t)}(a);return i},contains:function(e,t){return-1!=e.indexOf(t)},union:function(e,t){t=e.concat(t);return this.unique(t)},intersect:function(e,t){for(var n=this,r=(e=this.unique(e)).map(function(e){return n.contains(t,e)?e:null}).filter(function(e){return e}),o=0,i=r.length;o<i;o++)null===r[o]&&r.splice(o,1);return r},extend:function(e){var n={},r=!1,t=0;"boolean"===this.typeIs(e)&&(r=e,t++);for(var o=function(e){for(var t in e)e.hasOwnProperty(t)&&("object"===this.typeIs(e[t])?n[t]=r?this.extend(n[t],e[t]):e[t]:n[t]=e[t])}.bind(this);t<arguments.length;t++)o(arguments[t]);return n},EventEmitter:new e},t});